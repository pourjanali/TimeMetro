<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>برنامه مترو تبریز</title>
    <!-- استفاده از Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- فونت وزیرمتن -->
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;700&display=swap" rel="stylesheet">

    <style>
        /* اعمال فونت پیش‌فرض */
        body {
            font-family: 'Vazirmatn', sans-serif;
            /* انیمیشن نرم برای تغییر رنگ */
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* استایل سفارشی برای اسکرول بار در حالت دارک */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: #a8a8a8;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #7a7a7a;
        }

        /* حالت دارک برای اسکرول بار */
        .dark ::-webkit-scrollbar-track {
            background: #2d3748;
            /* gray-800 */
        }

        .dark ::-webkit-scrollbar-thumb {
            background: #4a5568;
            /* gray-600 */
        }

        .dark ::-webkit-scrollbar-thumb:hover {
            background: #718096;
            /* gray-500 */
        }

        /* کلاس برای هایلایت کردن روز جاری در تقویم */
        .today {
            background-color: #3b82f6 !important;
            /* blue-500 */
            color: white !important;
            border-radius: 50%;
            font-weight: 700;
        }
    </style>

    <script>
        // کانفیگ Tailwind برای حالت دارک
        tailwind.config = {
            darkMode: 'class', // فعال‌سازی حالت دارک بر اساس کلاس 'dark' در <html>
            theme: {
                extend: {
                    fontFamily: {
                        'vazir': ['Vazirmatn', 'sans-serif']
                    }
                }
            }
        }
    </script>
</head>

<!-- 
  کلاس‌های بدنه:
  - bg-gray-100 dark:bg-gray-900: رنگ پس‌زمینه اصلی برای لایت و دارک مود
  - text-gray-900 dark:text-gray-100: رنگ متن اصلی
  - min-h-screen: حداقل ارتفاع به اندازه کل صفحه
  - font-vazir: اعمال فونت وزیر
-->

<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 min-h-screen font-vazir">

    <!-- کانتینر اصلی برنامه -->
    <div id="app-container" class="max-w-6xl mx-auto p-4 md:p-6">

        <!-- هدر: عنوان و دکمه تغییر تم -->
        <header class="flex justify-between items-center mb-6 pb-4 border-b border-gray-300 dark:border-gray-700">
            <h1 class="text-2xl md:text-3xl font-bold text-blue-600 dark:text-blue-400">
                برنامه هوشمند مترو تبریز
            </h1>

            <!-- دکمه تغییر تم (تاریک/روشن) -->
            <button id="theme-toggle"
                class="p-2 rounded-full text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">
                <!-- آیکون ماه (برای حالت روشن) -->
                <svg id="theme-icon-dark" class="h-6 w-6 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor"
                    stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                </svg>
                <!-- آیکون خورشید (برای حالت تاریک) -->
                <svg id="theme-icon-light" class="h-6 w-6 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor"
                    stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                </svg>
            </button>
        </header>

        <!-- بخش ویجت‌ها (آب و هوا و تقویم) -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">

            <!-- ویجت آب و هوا (زنده) -->
            <section id="weather-widget"
                class="md:col-span-1 bg-white dark:bg-gray-800 p-4 rounded-xl shadow-md border border-gray-200 dark:border-gray-700">
                <h2 class="text-lg font-semibold mb-3">آب و هوای تبریز</h2>
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-i-3">
                        <!-- آیکون آب و هوا (پویا) -->
                        <div id="weather-icon-container" class="w-16 h-16 text-blue-500">
                            <!-- آیکون لودینگ -->
                            <svg class="animate-spin h-12 w-12 text-gray-400" xmlns="http://www.w3.org/2000/svg"
                                fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
                                    stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor"
                                    d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                                </path>
                            </svg>
                        </div>
                        <div>
                            <div id="weather-temp" class="text-4xl font-bold">--°</div>
                            <div id="weather-desc" class="text-gray-600 dark:text-gray-400">درحال بارگذاری...</div>
                        </div>
                    </div>
                    <div class="text-sm text-left space-y-1">
                        <div id="weather-humidity" class="text-gray-500 dark:text-gray-400">رطوبت: --٪</div>
                        <div id="weather-wind" class="text-gray-500 dark:text-gray-400">باد: -- ک/س</div>
                    </div>
                </div>
            </section>

            <!-- ویجت تقویم فارسی -->
            <section id="calendar-widget"
                class="md:col-span-2 bg-white dark:bg-gray-800 p-4 rounded-xl shadow-md border border-gray-200 dark:border-gray-700">
                <div id="calendar-header" class="flex justify-between items-center mb-3">
                    <h2 id="calendar-month-year" class="text-lg font-semibold"></h2>
                </div>
                <div id="calendar-grid" class="grid grid-cols-7 gap-1 text-center">
                    <!-- هدر روزهای هفته -->
                    <div class="font-medium text-sm text-red-500">ش</div>
                    <div class="font-medium text-sm">ی</div>
                    <div class="font-medium text-sm">د</div>
                    <div class="font-medium text-sm">س</div>
                    <div class="font-medium text-sm">چ</div>
                    <div class="font-medium text-sm">پ</div>
                    <div class="font-medium text-sm text-red-500">ج</div>

                    <!-- روزهای ماه در اینجا توسط JS اضافه می‌شوند -->
                </div>
            </section>

        </div>

        <!-- بخش اصلی برنامه مترو -->
        <main
            class="bg-white dark:bg-gray-800 p-4 md:p-6 rounded-xl shadow-md border border-gray-200 dark:border-gray-700">
            <h2 class="text-xl font-semibold mb-4">برنامه حرکت قطارها</h2>

            <!-- کنترل‌های انتخاب -->
            <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6">
                <!-- انتخاب خط -->
                <div>
                    <label for="line-select" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">۱.
                        انتخاب خط:</label>
                    <select id="line-select"
                        class="w-full p-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
                        <option value="">-- خط را انتخاب کنید --</option>
                    </select>
                </div>

                <!-- انتخاب ایستگاه -->
                <div>
                    <label for="station-select"
                        class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">۲. انتخاب
                        ایستگاه:</label>
                    <select id="station-select"
                        class="w-full p-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500"
                        disabled>
                        <option value="">-- ابتدا خط را انتخاب کنید --</option>
                    </select>
                </div>

                <!-- انتخاب نوع روز -->
                <div>
                    <label for="day-type-select"
                        class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">۳. انتخاب نوع
                        روز:</label>
                    <select id="day-type-select"
                        class="w-full p-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500"
                        disabled>
                        <option value="weekdays">ایام هفته (شنبه تا پنج‌شنبه)</option>
                        <option value="holidays">جمعه و ایام تعطیل</option>
                    </select>
                </div>
            </div>

            <!-- نمایش نتایج زمان‌بندی -->
            <div id="schedule-results" class="mt-6">
                <p class="text-center text-gray-500 dark:text-gray-400">لطفاً خط و ایستگاه مورد نظر خود را انتخاب کنید.
                </p>
                <!-- نتایج در اینجا نمایش داده خواهند شد -->
            </div>
        </main>
    </div>

    <script type="module">
        // ======================================================================
        // ||                   ماژول مدیریت داده‌های مترو                      ||
        // ======================================================================
        const metroDataManager = {
            // محتوای کامل فایل schedule.json شما در اینجا قرار گرفته است
            scheduleData: {
                "ائل گؤلی": {
                    "weekdays": {
                        "toNoor": [
                            "05:55", "06:07", "06:19", "06:31", "06:43", "06:55", "07:07", "07:19", "07:31", "07:43",
                            "07:55", "08:07", "08:19", "08:31", "08:43", "08:55", "09:07", "09:19", "09:31", "09:43",
                            "09:55", "10:07", "10:19", "10:31", "10:43", "10:55", "11:07", "11:19", "11:31", "11:43",
                            "11:55", "12:07", "12:19", "12:31", "12:43", "12:55", "13:07", "13:19", "13:31", "13:43",
                            "13:55", "14:07", "14:19", "14:31", "14:43", "14:55", "15:07", "15:19", "15:31", "15:43",
                            "15:55", "16:07", "16:19", "16:31", "16:43", "16:55", "17:07", "17:19", "17:31", "17:43",
                            "17:55", "18:07", "18:19", "18:31", "18:43", "18:55", "19:07", "19:19", "19:31", "19:43",
                            "19:55", "20:10"
                        ],
                        "toElGoli": [
                            "06:50", "07:02", "07:14", "07:26", "07:38", "07:50", "08:02", "08:14", "08:26", "08:38",
                            "08:50", "09:02", "09:14", "09:26", "09:38", "09:50", "10:02", "10:14", "10:26", "10:38",
                            "10:50", "11:02", "11:14", "11:26", "11:38", "11:50", "12:02", "12:14", "12:26", "12:38",
                            "12:50", "13:02", "13:14", "13:26", "13:38", "13:50", "14:02", "14:14", "14:26", "14:38",
                            "14:50", "15:02", "15:14", "15:26", "15:38", "15:50", "16:02", "16:14", "16:26", "16:38",
                            "16:50", "17:02", "17:14", "17:26", "17:38", "17:50", "18:02", "18:14", "18:26", "18:38",
                            "18:50", "19:02", "19:14", "19:26", "19:38", "19:50", "20:05", "20:20", "20:35", "20:50"
                        ]
                    },
                    "holidays": {
                        "toNoor": [
                            "07:30", "07:46", "08:02", "08:18", "08:34", "08:50", "09:06", "09:22", "09:38", "09:54",
                            "10:10", "10:26", "10:42", "10:58", "11:14", "11:30", "11:46", "12:02", "12:18", "12:34",
                            "12:50", "13:06", "13:22", "13:38", "13:54", "14:10", "14:26", "14:42", "14:58", "15:14",
                            "15:30", "15:46", "16:02", "16:18", "16:34", "16:50", "17:06", "17:22", "17:38", "17:54",
                            "18:10", "18:26", "18:42", "18:58", "19:14", "19:30", "19:46"
                        ],
                        "toElGoli": [
                            "08:15", "08:31", "08:47", "09:03", "09:19", "09:35", "09:51", "10:07", "10:23", "10:39",
                            "10:55", "11:11", "11:27", "11:43", "11:59", "12:15", "12:31", "12:47", "13:03", "13:19",
                            "13:35", "13:51", "14:07", "14:23", "14:39", "14:55", "15:11", "15:27", "15:43", "15:59",
                            "16:15", "16:31", "16:47", "17:03", "17:19", "17:35", "17:51", "18:07", "18:23", "18:39",
                            "18:55", "19:11", "19:27", "19:43", "20:00", "20:15"
                        ]
                    }
                },
                "سهند": {
                    "weekdays": {
                        "toNoor": [
                            "05:57", "06:09", "06:21", "06:33", "06:45", "06:57", "07:09", "07:21", "07:33", "07:45",
                            "07:57", "08:09", "08:21", "08:33", "08:45", "08:57", "09:09", "09:21", "09:33", "09:45",
                            "09:57", "10:09", "10:21", "10:33", "10:45", "10:57", "11:09", "11:21", "11:33", "11:45",
                            "11:57", "12:09", "12:21", "12:33", "12:45", "12:57", "13:09", "13:21", "13:33", "13:45",
                            "13:57", "14:09", "14:21", "14:33", "14:45", "14:57", "15:09", "15:21", "15:33", "15:45",
                            "15:57", "16:09", "16:21", "16:33", "16:45", "16:57", "17:09", "17:21", "17:33", "17:45",
                            "17:57", "18:09", "18:21", "18:33", "18:45", "18:57", "19:09", "19:21", "19:33", "19:45",
                            "19:57", "20:12"
                        ],
                        "toElGoli": [
                            "06:48", "07:00", "07:12", "07:24", "07:36", "07:48", "08:00", "08:12", "08:24", "08:36",
                            "08:48", "09:00", "09:12", "09:24", "09:36", "09:48", "10:00", "10:12", "10:24", "10:36",
                            "10:48", "11:00", "11:12", "11:24", "11:36", "11:48", "12:00", "12:12", "12:24", "12:36",
                            "12:48", "13:00", "13:12", "13:24", "13:36", "13:48", "14:00", "14:12", "14:24", "14:36",
                            "14:48", "15:00", "15:12", "15:24", "15:36", "15:48", "16:00", "16:12", "16:24", "16:36",
                            "16:48", "17:00", "17:12", "17:24", "17:36", "17:48", "18:00", "18:12", "18:24", "18:36",
                            "18:48", "19:00", "19:12", "19:24", "19:36", "19:48", "20:03", "20:18", "20:33", "20:48"
                        ]
                    },
                    "holidays": {
                        "toNoor": [
                            "07:32", "07:48", "08:04", "08:20", "08:36", "08:52", "09:08", "09:24", "09:40", "09:56",
                            "10:12", "10:28", "10:44", "11:00", "11:16", "11:32", "11:48", "12:04", "12:20", "12:36",
                            "12:52", "13:08", "13:24", "13:40", "13:56", "14:12", "14:28", "14:44", "15:00", "15:16",
                            "15:32", "15:48", "16:04", "16:20", "16:36", "16:52", "17:08", "17:24", "17:40", "17:56",
                            "18:12", "18:28", "18:44", "19:00", "19:16", "19:32", "19:48"
                        ],
                        "toElGoli": [
                            "08:13", "08:29", "08:45", "09:01", "09:17", "09:33", "09:49", "10:05", "10:21", "10:37",
                            "10:53", "11:09", "11:25", "11:41", "11:57", "12:13", "12:29", "12:45", "13:01", "13:17",
                            "13:33", "13:49", "14:05", "14:21", "14:37", "14:53", "15:09", "15:25", "15:41", "15:57",
                            "16:13", "16:29", "16:45", "17:01", "17:17", "17:33", "17:49", "18:05", "18:21", "18:37",
                            "18:53", "19:09", "19:25", "19:41", "19:58", "20:13"
                        ]
                    }
                },
                "امام رضا(ع)": {
                    "weekdays": {
                        "toNoor": [
                            "05:59", "06:11", "06:23", "06:35", "06:47", "06:59", "07:11", "07:23", "07:35", "07:47",
                            "07:59", "08:11", "08:23", "08:35", "08:47", "08:59", "09:11", "09:23", "09:35", "09:47",
                            "09:59", "10:11", "10:23", "10:35", "10:47", "10:59", "11:11", "11:23", "11:35", "11:47",
                            "11:59", "12:11", "12:23", "12:35", "12:47", "12:59", "13:11", "13:23", "13:35", "13:47",
                            "13:59", "14:11", "14:23", "14:35", "14:47", "14:59", "15:11", "15:23", "15:35", "15:47",
                            "15:59", "16:11", "16:23", "16:35", "16:47", "16:59", "17:11", "17:23", "17:35", "17:47",
                            "17:59", "18:11", "18:23", "18:35", "18:47", "18:59", "19:11", "19:23", "19:35", "19:47",
                            "19:59", "20:14"
                        ],
                        "toElGoli": [
                            "06:46", "06:58", "07:10", "07:22", "07:34", "07:46", "07:58", "08:10", "08:22", "08:34",
                            "08:46", "08:58", "09:10", "09:22", "09:34", "09:46", "09:58", "10:10", "10:22", "10:34",
                            "10:46", "10:58", "11:10", "11:22", "11:34", "11:46", "11:58", "12:10", "12:22", "12:34",
                            "12:46", "12:58", "13:10", "13:22", "13:34", "13:46", "13:58", "14:10", "14:22", "14:34",
                            "14:46", "14:58", "15:10", "15:22", "15:34", "15:46", "15:58", "16:10", "16:22", "16:34",
                            "16:46", "16:58", "17:10", "17:22", "17:34", "17:46", "17:58", "18:10", "18:22", "18:34",
                            "18:46", "18:58", "19:10", "19:22", "19:34", "19:46", "20:01", "20:16", "20:31", "20:46"
                        ]
                    },
                    "holidays": {
                        "toNoor": [
                            "07:34", "07:50", "08:06", "08:22", "08:38", "08:54", "09:10", "09:26", "09:42", "09:58",
                            "10:14", "10:30", "10:46", "11:02", "11:18", "11:34", "11:50", "12:06", "12:22", "12:38",
                            "12:54", "13:10", "13:26", "13:42", "13:58", "14:14", "14:30", "14:46", "15:02", "15:18",
                            "15:34", "15:50", "16:06", "16:22", "16:38", "16:54", "17:10", "17:26", "17:42", "17:58",
                            "18:14", "18:30", "18:46", "19:02", "19:18", "19:34", "19:50"
                        ],
                        "toElGoli": [
                            "08:11", "08:27", "08:43", "08:59", "09:15", "09:31", "09:47", "10:03", "10:19", "10:35",
                            "10:51", "11:07", "11:23", "11:39", "11:55", "12:11", "12:27", "12:43", "12:59", "13:15",
                            "13:31", "13:47", "14:03", "14:19", "14:35", "14:51", "15:07", "15:23", "15:39", "15:55",
                            "16:11", "16:27", "16:43", "16:59", "17:15", "17:31", "17:47", "18:03", "18:19", "18:35",
                            "18:51", "19:07", "19:23", "19:39", "19:56", "20:11"
                        ]
                    }
                },
                "خیام": {
                    "weekdays": {
                        "toNoor": [
                            "06:01", "06:13", "06:25", "06:37", "06:49", "07:01", "07:13", "07:25", "07:37", "07:49",
                            "08:01", "08:13", "08:25", "08:37", "08:49", "09:01", "09:13", "09:25", "09:37", "09:49",
                            "10:01", "10:13", "10:25", "10:37", "10:49", "11:01", "11:13", "11:25", "11:37", "11:49",
                            "12:01", "12:13", "12:25", "12:37", "12:49", "13:01", "13:13", "13:25", "13:37", "13:49",
                            "14:01", "14:13", "14:25", "14:37", "14:49", "15:01", "15:13", "15:25", "15:37", "15:49",
                            "16:01", "16:13", "16:25", "16:37", "16:49", "17:01", "17:13", "17:25", "17:37", "17:49",
                            "18:01", "18:13", "18:25", "18:37", "18:49", "19:01", "19:13", "19:25", "19:37", "19:49",
                            "20:01", "20:16"
                        ],
                        "toElGoli": [
                            "06:44", "06:56", "07:08", "07:20", "07:32", "07:44", "07:56", "08:08", "08:20", "08:32",
                            "08:44", "08:56", "09:08", "09:20", "09:32", "09:44", "09:56", "10:08", "10:20", "10:32",
                            "10:44", "10:56", "11:08", "11:20", "11:32", "11:44", "11:56", "12:08", "12:20", "12:32",
                            "12:44", "12:56", "13:08", "13:20", "13:32", "13:44", "13:56", "14:08", "14:20", "14:32",
                            "14:44", "14:56", "15:08", "15:20", "15:32", "15:44", "15:56", "16:08", "16:20", "16:32",
                            "16:44", "16:56", "17:08", "17:20", "17:32", "17:44", "17:56", "18:08", "18:20", "18:32",
                            "18:44", "18:56", "19:08", "19:20", "19:32", "19:44", "19:59", "20:14", "20:29", "20:44"
                        ]
                    },
                    "holidays": {
                        "toNoor": [
                            "07:36", "07:52", "08:08", "08:24", "08:40", "08:56", "09:12", "09:28", "09:44", "10:00",
                            "10:16", "10:32", "10:48", "11:04", "11:20", "11:36", "11:52", "12:08", "12:24", "12:40",
                            "12:56", "13:12", "13:28", "13:44", "14:00", "14:16", "14:32", "14:48", "15:04", "15:20",
                            "15:36", "15:52", "16:08", "16:24", "16:40", "16:56", "17:12", "17:28", "17:44", "18:00",
                            "18:16", "18:32", "18:48", "19:04", "19:20", "19:36", "19:52"
                        ],
                        "toElGoli": [
                            "08:09", "08:25", "08:41", "08:57", "09:13", "09:29", "09:45", "10:01", "10:17", "10:33",
                            "10:49", "11:05", "11:21", "11:37", "11:53", "12:09", "12:25", "12:41", "12:57", "13:13",
                            "13:29", "13:45", "14:01", "14:17", "14:33", "14:49", "15:05", "15:21", "15:37", "15:53",
                            "16:09", "16:25", "16:41", "16:57", "17:13", "17:29", "17:45", "18:01", "18:17", "18:33",
                            "18:49", "19:05", "19:21", "19:37", "19:54", "20:09"
                        ]
                    }
                },
                "29بهمن": {
                    "weekdays": {
                        "toNoor": [
                            "06:03", "06:15", "06:27", "06:39", "06:51", "07:03", "07:15", "07:27", "07:39", "07:51",
                            "08:03", "08:15", "08:27", "08:39", "08:51", "09:03", "09:15", "09:27", "09:39", "09:51",
                            "10:03", "10:15", "10:27", "10:39", "10:51", "11:03", "11:15", "11:27", "11:39", "11:51",
                            "12:03", "12:15", "12:27", "12:39", "12:51", "13:03", "13:15", "13:27", "13:39", "13:51",
                            "14:03", "14:15", "14:27", "14:39", "14:51", "15:03", "15:15", "15:27", "15:39", "15:51",
                            "16:03", "16:15", "16:27", "16:39", "16:51", "17:03", "17:15", "17:27", "17:39", "17:51",
                            "18:03", "18:15", "18:27", "18:39", "18:51", "19:03", "19:15", "19:27", "19:39", "19:51",
                            "20:03", "20:18"
                        ],
                        "toElGoli": [
                            "06:42", "06:54", "07:06", "07:18", "07:30", "07:42", "07:54", "08:06", "08:18", "08:30",
                            "08:42", "08:54", "09:06", "09:18", "09:30", "09:42", "09:54", "10:06", "10:18", "10:30",
                            "10:42", "10:54", "11:06", "11:18", "11:30", "11:42", "11:54", "12:06", "12:18", "12:30",
                            "12:42", "12:54", "13:06", "13:18", "13:30", "13:42", "13:54", "14:06", "14:18", "14:30",
                            "14:42", "14:54", "15:06", "15:18", "15:30", "15:42", "15:54", "16:06", "16:18", "16:30",
                            "16:42", "16:54", "17:06", "17:18", "17:30", "17:42", "17:54", "18:06", "18:18", "18:30",
                            "18:42", "18:54", "19:06", "19:18", "19:30", "19:42", "19:57", "20:12", "20:27", "20:42"
                        ]
                    },
                    "holidays": {
                        "toNoor": [
                            "07:38", "07:54", "08:10", "08:26", "08:42", "08:58", "09:14", "09:30", "09:46", "10:02",
                            "10:18", "10:34", "10:50", "11:06", "11:22", "11:38", "11:54", "12:10", "12:26", "12:42",
                            "12:58", "13:14", "13:30", "13:46", "14:02", "14:18", "14:34", "14:50", "15:06", "15:22",
                            "15:38", "15:54", "16:10", "16:26", "16:42", "16:58", "17:14", "17:30", "17:46", "18:02",
                            "18:18", "18:34", "18:50", "19:06", "19:22", "19:38", "19:54"
                        ],
                        "toElGoli": [
                            "08:07", "08:23", "08:39", "08:55", "09:11", "09:27", "09:43", "09:59", "10:15", "10:31",
                            "10:47", "11:03", "11:19", "11:35", "11:51", "12:07", "12:23", "12:39", "12:55", "13:11",
                            "13:27", "13:43", "13:59", "14:15", "14:31", "14:47", "15:03", "15:19", "15:35", "15:51",
                            "16:07", "16:23", "16:39", "16:55", "17:11", "17:27", "17:43", "17:59", "18:15", "18:31",
                            "18:47", "19:03", "19:19", "19:35", "19:52", "20:07"
                        ]
                    }
                },
                "استاد شهریار": {
                    "weekdays": {
                        "toNoor": [
                            "06:05", "06:17", "06:29", "06:41", "06:53", "07:05", "07:17", "07:29", "07:41", "07:53",
                            "08:05", "08:17", "08:29", "08:41", "08:53", "09:05", "09:17", "09:29", "09:41", "09:53",
                            "10:05", "10:17", "10:29", "10:41", "10:53", "11:05", "11:17", "11:29", "11:41", "11:53",
                            "12:05", "12:17", "12:29", "12:41", "12:53", "13:05", "13:17", "13:29", "13:41", "13:53",
                            "14:05", "14:17", "14:29", "14:41", "14:53", "15:05", "15:17", "15:29", "15:41", "15:53",
                            "16:05", "16:17", "16:29", "16:41", "16:53", "17:05", "17:17", "17:29", "17:41", "17:53",
                            "18:05", "18:17", "18:29", "18:41", "18:53", "19:05", "19:17", "19:29", "19:41", "19:53",
                            "20:05", "20:20"
                        ],
                        "toElGoli": [
                            "06:40", "06:52", "07:04", "07:16", "07:28", "07:40", "07:52", "08:04", "08:16", "08:28",
                            "08:40", "08:52", "09:04", "09:16", "09:28", "09:40", "09:52", "10:04", "10:16", "10:28",
                            "10:40", "10:52", "11:04", "11:16", "11:28", "11:40", "11:52", "12:04", "12:16", "12:28",
                            "12:40", "12:52", "13:04", "13:16", "13:28", "13:40", "13:52", "14:04", "14:16", "14:28",
                            "14:40", "14:52", "15:04", "15:16", "15:28", "15:40", "15:52", "16:04", "16:16", "16:28",
                            "16:40", "16:52", "17:04", "17:16", "17:28", "17:40", "17:52", "18:04", "18:16", "18:28",
                            "18:40", "18:52", "19:04", "19:16", "19:28", "19:40", "19:55", "20:10", "20:25", "20:40"
                        ]
                    },
                    "holidays": {
                        "toNoor": [
                            "07:40", "07:56", "08:12", "08:28", "08:44", "09:00", "09:16", "09:32", "09:48", "10:04",
                            "10:20", "10:36", "10:52", "11:08", "11:24", "11:40", "11:56", "12:12", "12:28", "12:44",
                            "13:00", "13:16", "13:32", "13:48", "14:04", "14:20", "14:36", "14:52", "15:08", "15:24",
                            "15:40", "15:56", "16:12", "16:28", "16:44", "17:00", "17:16", "17:32", "17:48", "18:04",
                            "18:20", "18:36", "18:52", "19:08", "19:24", "19:40", "19:56"
                        ],
                        "toElGoli": [
                            "08:05", "08:21", "08:37", "08:53", "09:09", "09:25", "09:41", "09:57", "10:13", "10:29",
                            "10:45", "11:01", "11:17", "11:33", "11:49", "12:05", "12:21", "12:37", "12:53", "13:09",
                            "13:25", "13:41", "13:57", "14:13", "14:29", "14:45", "15:01", "15:17", "15:33", "15:49",
                            "16:05", "16:21", "16:37", "16:53", "17:09", "17:25", "17:41", "17:57", "18:13", "18:29",
                            "18:45", "19:01", "19:17", "19:33", "19:50", "20:05"
                        ]
                    }
                },
                "دانشگاه": {
                    "weekdays": {
                        "toNoor": [
                            "06:07", "06:19", "06:31", "06:43", "06:55", "07:07", "07:19", "07:31", "07:43", "07:55",
                            "08:07", "08:19", "08:31", "08:43", "08:55", "09:07", "09:19", "09:31", "09:43", "09:55",
                            "10:07", "10:19", "10:31", "10:43", "10:55", "11:07", "11:19", "11:31", "11:43", "11:55",
                            "12:07", "12:19", "12:31", "12:43", "12:55", "13:07", "13:19", "13:31", "13:43", "13:55",
                            "14:07", "14:19", "14:31", "14:43", "14:55", "15:07", "15:19", "15:31", "15:43", "15:55",
                            "16:07", "16:19", "16:31", "16:43", "16:55", "17:07", "17:19", "17:31", "17:43", "17:55",
                            "18:07", "18:19", "18:31", "18:43", "18:55", "19:07", "19:19", "19:31", "19:43", "19:55",
                            "20:07", "20:22"
                        ],
                        "toElGoli": [
                            "06:38", "06:50", "07:02", "07:14", "07:26", "07:38", "07:50", "08:02", "08:14", "08:26",
                            "08:38", "08:50", "09:02", "09:14", "09:26", "09:38", "09:50", "10:02", "10:14", "10:26",
                            "10:38", "10:50", "11:02", "11:14", "11:26", "11:38", "11:50", "12:02", "12:14", "12:26",
                            "12:38", "12:50", "13:02", "13:14", "13:26", "13:38", "13:50", "14:02", "14:14", "14:26",
                            "14:38", "14:50", "15:02", "15:14", "15:26", "15:38", "15:50", "16:02", "16:14", "16:26",
                            "16:38", "16:50", "17:02", "17:14", "17:26", "17:38", "17:50", "18:02", "18:14", "18:26",
                            "18:38", "18:50", "19:02", "19:14", "19:26", "19:38", "19:53", "20:08", "20:23", "20:38"
                        ]
                    },
                    "holidays": {
                        "toNoor": [
                            "07:42", "07:58", "08:14", "08:30", "08:46", "09:02", "09:18", "09:34", "09:50", "10:06",
                            "10:22", "10:38", "10:54", "11:10", "11:26", "11:42", "11:58", "12:14", "12:30", "12:46",
                            "13:02", "13:18", "13:34", "13:50", "14:06", "14:22", "14:38", "14:54", "15:10", "15:26",
                            "15:42", "15:58", "16:14", "16:30", "16:46", "17:02", "17:18", "17:34", "17:50", "18:06",
                            "18:22", "18:38", "18:54", "19:10", "19:26", "19:42", "19:58"
                        ],
                        "toElGoli": [
                            "08:03", "08:19", "08:35", "08:51", "09:07", "09:23", "09:39", "09:55", "10:11", "10:27",
                            "10:43", "10:59", "11:15", "11:31", "11:47", "12:03", "12:19", "12:35", "12:51", "13:07",
                            "13:23", "13:39", "13:55", "14:11", "14:27", "14:43", "14:59", "15:15", "15:31", "15:47",
                            "16:03", "16:19", "16:35", "16:51", "17:07", "17:23", "17:39", "17:55", "18:11", "18:27",
                            "18:43", "18:59", "19:15", "19:31", "19:48", "20:03"
                        ]
                    }
                },
                "آبرسان": {
                    "weekdays": {
                        "toNoor": [
                            "06:09", "06:21", "06:33", "06:45", "06:57", "07:09", "07:21", "07:33", "07:45", "07:57",
                            "08:09", "08:21", "08:33", "08:45", "08:57", "09:09", "09:21", "09:33", "09:45", "09:57",
                            "10:09", "10:21", "10:33", "10:45", "10:57", "11:09", "11:21", "11:33", "11:45", "11:57",
                            "12:09", "12:21", "12:33", "12:45", "12:57", "13:09", "13:21", "13:33", "13:45", "13:57",
                            "14:09", "14:21", "14:33", "14:45", "14:57", "15:09", "15:21", "15:33", "15:45", "15:57",
                            "16:09", "16:21", "16:33", "16:45", "16:57", "17:09", "17:21", "17:33", "17:45", "17:57",
                            "18:09", "18:21", "18:33", "18:45", "18:57", "19:09", "19:21", "19:33", "19:45", "19:57",
                            "20:09", "20:24"
                        ],
                        "toElGoli": [
                            "06:36", "06:48", "07:00", "07:12", "07:24", "07:36", "07:48", "08:00", "08:12", "08:24",
                            "08:36", "08:48", "09:00", "09:12", "09:24", "09:36", "09:48", "10:00", "10:12", "10:24",
                            "10:36", "10:48", "11:00", "11:12", "11:24", "11:36", "11:48", "12:00", "12:12", "12:24",
                            "12:36", "12:48", "13:00", "13:12", "13:24", "13:36", "13:48", "14:00", "14:12", "14:24",
                            "14:36", "14:48", "15:00", "15:12", "15:24", "15:36", "15:48", "16:00", "16:12", "16:24",
                            "16:36", "16:48", "17:00", "17:12", "17:24", "17:36", "17:48", "18:00", "18:12", "18:24",
                            "18:36", "18:48", "19:00", "19:12", "19:24", "19:36", "19:51", "20:06", "20:21", "20:36"
                        ]
                    },
                    "holidays": {
                        "toNoor": [
                            "07:44", "08:00", "08:16", "08:32", "08:48", "09:04", "09:20", "09:36", "09:52", "10:08",
                            "10:24", "10:40", "10:56", "11:12", "11:28", "11:44", "12:00", "12:16", "12:32", "12:48",
                            "13:04", "13:20", "13:36", "13:52", "14:08", "14:24", "14:40", "14:56", "15:12", "15:28",
                            "15:44", "16:00", "16:16", "16:32", "16:48", "17:04", "17:20", "17:36", "17:52", "18:08",
                            "18:24", "18:40", "18:56", "19:12", "19:28", "19:44", "20:00"
                        ],
                        "toElGoli": [
                            "08:01", "08:17", "08:33", "08:49", "09:05", "09:21", "09:37", "09:53", "10:09", "10:25",
                            "10:41", "10:57", "11:13", "11:29", "11:45", "12:01", "12:17", "12:33", "12:49", "13:05",
                            "13:21", "13:37", "13:53", "14:09", "14:25", "14:41", "14:57", "15:13", "15:29", "15:45",
                            "16:01", "16:17", "16:33", "16:49", "17:05", "17:21", "17:37", "17:53", "18:09", "18:25",
                            "18:41", "18:57", "19:13", "19:29", "19:46", "20:01"
                        ]
                    }
                },
                "سالار ملی(قطب)": {
                    "weekdays": {
                        "toNoor": [
                            "06:11", "06:23", "06:35", "06:47", "06:59", "07:11", "07:23", "07:35", "07:47", "07:59",
                            "08:11", "08:23", "08:35", "08:47", "08:59", "09:11", "09:23", "09:35", "09:47", "09:59",
                            "10:11", "10:23", "10:35", "10:47", "10:59", "11:11", "11:23", "11:35", "11:47", "11:59",
                            "12:11", "12:23", "12:35", "12:47", "12:59", "13:11", "13:23", "13:35", "13:47", "13:59",
                            "14:11", "14:23", "14:35", "14:47", "14:59", "15:11", "15:23", "15:35", "15:47", "15:59",
                            "16:11", "16:23", "16:35", "16:47", "16:59", "17:11", "17:23", "17:35", "17:47", "17:59",
                            "18:11", "18:23", "18:35", "18:47", "18:59", "19:11", "19:23", "19:35", "19:47", "19:59",
                            "20:11", "20:26"
                        ],
                        "toElGoli": [
                            "06:34", "06:46", "06:58", "07:10", "07:22", "07:34", "07:46", "07:58", "08:10", "08:22",
                            "08:34", "08:46", "08:58", "09:10", "09:22", "09:34", "09:46", "09:58", "10:10", "10:22",
                            "10:34", "10:46", "10:58", "11:10", "11:22", "11:34", "11:46", "11:58", "12:10", "12:22",
                            "12:34", "12:46", "12:58", "13:10", "13:22", "13:34", "13:46", "13:58", "14:10", "14:22",
                            "14:34", "14:46", "14:58", "15:10", "15:22", "15:34", "15:46", "15:58", "16:10", "16:22",
                            "16:34", "16:46", "16:58", "17:10", "17:22", "17:34", "17:46", "17:58", "18:10", "18:22",
                            "18:34", "18:46", "18:58", "19:10", "19:22", "19:34", "19:49", "20:04", "20:19", "20:34"
                        ]
                    },
                    "holidays": {
                        "toNoor": [
                            "07:46", "08:02", "08:18", "08:34", "08:50", "09:06", "09:22", "09:38", "09:54", "10:10",
                            "10:26", "10:42", "10:58", "11:14", "11:30", "11:46", "12:02", "12:18", "12:34", "12:50",
                            "13:06", "13:22", "13:38", "13:54", "14:10", "14:26", "14:42", "14:58", "15:14", "15:30",
                            "15:46", "16:02", "16:18", "16:34", "16:50", "17:06", "17:22", "17:38", "17:54", "18:10",
                            "18:26", "18:42", "18:58", "19:14", "19:30", "19:46", "20:02"
                        ],
                        "toElGoli": [
                            "07:59", "08:15", "08:31", "08:47", "09:03", "09:19", "09:35", "09:51", "10:07", "10:23",
                            "10:39", "10:55", "11:11", "11:27", "11:43", "11:59", "12:15", "12:31", "12:47", "13:03",
                            "13:19", "13:35", "13:51", "14:07", "14:23", "14:39", "14:55", "15:11", "15:27", "15:43",
                            "15:59", "16:15", "16:31", "16:47", "17:03", "17:19", "17:35", "17:51", "18:07", "18:23",
                            "18:39", "18:55", "19:11", "19:27", "19:44", "19:59"
                        ]
                    }
                },
                "شهید بهشتی (ره)": {
                    "weekdays": {
                        "toNoor": [
                            "06:13", "06:25", "06:37", "06:49", "07:01", "07:13", "07:25", "07:37", "07:49", "08:01",
                            "08:13", "08:25", "08:37", "08:49", "09:01", "09:13", "09:25", "09:37", "09:49", "10:01",
                            "10:13", "10:25", "10:37", "10:49", "11:01", "11:13", "11:25", "11:37", "11:49", "12:01",
                            "12:13", "12:25", "12:37", "12:49", "13:01", "13:13", "13:25", "13:37", "13:49", "14:01",
                            "14:13", "14:25", "14:37", "14:49", "15:01", "15:13", "15:25", "15:37", "15:49", "16:01",
                            "16:13", "16:25", "16:37", "16:49", "17:01", "17:13", "17:25", "17:37", "17:49", "18:01",
                            "18:13", "18:25", "18:37", "18:49", "19:01", "19:13", "19:25", "19:37", "19:49", "20:01",
                            "20:13", "20:28"
                        ],
                        "toElGoli": [
                            "06:32", "06:44", "06:56", "07:08", "07:20", "07:32", "07:44", "07:56", "08:08", "08:20",
                            "08:32", "08:44", "08:56", "09:08", "09:20", "09:32", "09:44", "09:56", "10:08", "10:20",
                            "10:32", "10:44", "10:56", "11:08", "11:20", "11:32", "11:44", "11:56", "12:08", "12:20",
                            "12:32", "12:44", "12:56", "13:08", "13:20", "13:32", "13:44", "13:56", "14:08", "14:20",
                            "14:32", "14:44", "14:56", "15:08", "15:20", "15:32", "15:44", "15:56", "16:08", "16:20",
                            "16:32", "16:44", "16:56", "17:08", "17:20", "17:32", "17:44", "17:56", "18:08", "18:20",
                            "18:32", "18:44", "18:56", "19:08", "19:20", "19:32", "19:47", "20:02", "20:17", "20:32"
                        ]
                    },
                    "holidays": {
                        "toNoor": [
                            "07:48", "08:04", "08:20", "08:36", "08:52", "09:08", "09:24", "09:40", "09:56", "10:12",
                            "10:28", "10:44", "11:00", "11:16", "11:32", "11:48", "12:04", "12:20", "12:36", "12:52",
                            "13:08", "13:24", "13:40", "13:56", "14:12", "14:28", "14:44", "15:00", "15:16", "15:32",
                            "15:48", "16:04", "16:20", "16:36", "16:52", "17:08", "17:24", "17:40", "17:56", "18:12",
                            "18:28", "18:44", "19:00", "19:16", "19:32", "19:48", "20:04"
                        ],
                        "toElGoli": [
                            "07:57", "08:13", "08:29", "08:45", "09:01", "09:17", "09:33", "09:49", "10:05", "10:21",
                            "10:37", "10:53", "11:09", "11:25", "11:41", "11:57", "12:13", "12:29", "12:45", "13:01",
                            "13:17", "13:33", "13:49", "14:05", "14:21", "14:37", "14:53", "15:09", "15:25", "15:41",
                            "15:57", "16:13", "16:29", "16:45", "17:01", "17:17", "17:33", "17:49", "18:05", "18:21",
                            "18:37", "18:53", "19:09", "19:25", "19:42", "19:57"
                        ]
                    }
                },
                "میدان ساعت": {
                    "weekdays": {
                        "toNoor": [
                            "06:15", "06:27", "06:39", "06:51", "07:03", "07:15", "07:27", "07:39", "07:51", "08:03",
                            "08:15", "08:27", "08:39", "08:51", "09:03", "09:15", "09:27", "09:39", "09:51", "10:03",
                            "10:15", "10:27", "10:39", "10:51", "11:03", "11:15", "11:27", "11:39", "11:51", "12:03",
                            "12:15", "12:27", "12:39", "12:51", "13:03", "13:15", "13:27", "13:39", "13:51", "14:03",
                            "14:15", "14:27", "14:39", "14:51", "15:03", "15:15", "15:27", "15:39", "15:51", "16:03",
                            "16:15", "16:27", "16:39", "16:51", "17:03", "17:15", "17:27", "17:39", "17:51", "18:03",
                            "18:15", "18:27", "18:39", "18:51", "19:03", "19:15", "19:27", "19:39", "19:51", "20:03",
                            "20:15", "20:30"
                        ],
                        "toElGoli": [
                            "06:29", "06:41", "06:53", "07:05", "07:17", "07:29", "07:41", "07:53", "08:05", "08:17",
                            "08:29", "08:41", "08:53", "09:05", "09:17", "09:29", "09:41", "09:53", "10:05", "10:17",
                            "10:29", "10:41", "10:53", "11:05", "11:17", "11:29", "11:41", "11:53", "12:05", "12:17",
                            "12:29", "12:41", "12:53", "13:05", "13:17", "13:29", "13:41", "13:53", "14:05", "14:17",
                            "14:29", "14:41", "14:53", "15:05", "15:17", "15:29", "15:41", "15:53", "16:05", "16:17",
                            "16:29", "16:41", "16:53", "17:05", "17:17", "17:29", "17:41", "17:53", "18:05", "18:17",
                            "18:29", "18:41", "18:53", "19:05", "19:17", "19:29", "19:44", "19:59", "20:14", "20:29"
                        ]
                    },
                    "holidays": {
                        "toNoor": [
                            "07:50", "08:06", "08:22", "08:38", "08:54", "09:10", "09:26", "09:42", "09:58", "10:14",
                            "10:30", "10:46", "11:02", "11:18", "11:34", "11:50", "12:06", "12:22", "12:38", "12:54",
                            "13:10", "13:26", "13:42", "13:58", "14:14", "14:30", "14:46", "15:02", "15:18", "15:34",
                            "15:50", "16:06", "16:22", "16:38", "16:54", "17:10", "17:26", "17:42", "17:58", "18:14",
                            "18:30", "18:46", "19:02", "19:18", "19:34", "19:50", "20:06"
                        ],
                        "toElGoli": [
                            "07:54", "08:10", "08:26", "08:42", "08:58", "09:14", "09:30", "09:46", "10:02", "10:18",
                            "10:34", "10:50", "11:06", "11:22", "11:38", "11:54", "12:10", "12:26", "12:42", "12:58",
                            "13:14", "13:30", "13:46", "14:02", "14:18", "14:34", "14:50", "15:06", "15:22", "15:38",
                            "15:54", "16:10", "16:26", "16:42", "16:58", "17:14", "17:30", "17:46", "18:02", "18:18",
                            "18:34", "18:50", "19:06", "19:22", "19:39", "19:54"
                        ]
                    }
                },
                "میدان کهن": {
                    "weekdays": {
                        "toNoor": [
                            "06:18", "06:30", "06:42", "06:54", "07:06", "07:18", "07:30", "07:42", "07:54", "08:06",
                            "08:18", "08:30", "08:42", "08:54", "09:06", "09:18", "09:30", "09:42", "09:54", "10:06",
                            "10:18", "10:30", "10:42", "10:54", "11:06", "11:18", "11:30", "11:42", "11:54", "12:06",
                            "12:18", "12:30", "12:42", "12:54", "13:06", "13:18", "13:30", "13:42", "13:54", "14:06",
                            "14:18", "14:30", "14:42", "14:54", "15:06", "15:18", "15:30", "15:42", "15:54", "16:06",
                            "16:18", "16:30", "16:42", "16:54", "17:06", "17:18", "17:30", "17:42", "17:54", "18:06",
                            "18:18", "18:30", "18:42", "18:54", "19:06", "19:18", "19:30", "19:42", "19:54", "20:06",
                            "20:18", "20:33"
                        ],
                        "toElGoli": [
                            "06:27", "06:39", "06:51", "07:03", "07:15", "07:27", "07:39", "07:51", "08:03", "08:15",
                            "08:27", "08:39", "08:51", "09:03", "09:15", "09:27", "09:41", "09:51", "10:03", "10:15",
                            "10:27", "10:39", "10:51", "11:03", "11:15", "11:27", "11:39", "11:51", "12:03", "12:15",
                            "12:27", "12:39", "12:51", "13:03", "13:15", "13:27", "13:39", "13:51", "14:03", "14:15",
                            "14:27", "14:39", "14:51", "15:03", "15:15", "15:27", "15:39", "15:51", "16:03", "16:15",
                            "16:27", "16:39", "16:51", "17:03", "17:15", "17:27", "17:39", "17:51", "18:03", "18:15",
                            "18:27", "18:39", "18:51", "19:03", "19:15", "19:27", "19:42", "19:57", "20:12", "20:27"
                        ]
                    },
                    "holidays": {
                        "toNoor": [
                            "07:53", "08:09", "08:25", "08:41", "08:57", "09:13", "09:29", "09:45", "10:01", "10:17",
                            "10:33", "10:49", "11:05", "11:21", "11:37", "11:53", "12:09", "12:25", "12:41", "12:57",
                            "13:13", "13:29", "13:45", "14:01", "14:17", "14:33", "14:49", "15:05", "15:21", "15:37",
                            "15:53", "16:09", "16:25", "16:41", "16:57", "17:13", "17:29", "17:45", "18:01", "18:17",
                            "18:33", "18:49", "19:05", "19:21", "19:37", "19:53", "20:09"
                        ],
                        "toElGoli": [
                            "07:52", "08:08", "08:24", "08:40", "08:56", "09:12", "09:28", "09:44", "10:00", "10:16",
                            "10:32", "10:48", "11:04", "11:20", "11:36", "11:52", "12:08", "12:24", "12:40", "12:56",
                            "13:12", "13:28", "13:44", "14:00", "14:16", "14:32", "14:48", "15:04", "15:20", "15:36",
                            "15:52", "16:08", "16:24", "16:40", "16:56", "17:12", "17:28", "17:44", "18:00", "18:16",
                            "18:32", "18:48", "19:04", "19:20", "19:37", "19:52"
                        ]
                    }
                },
                "قونقا": {
                    "weekdays": {
                        "toNoor": [
                            "06:20", "06:32", "06:44", "06:56", "07:08", "07:20", "07:32", "07:44", "07:56", "08:08",
                            "08:20", "08:32", "08:44", "08:56", "09:08", "09:20", "09:32", "09:44", "09:56", "10:08",
                            "10:20", "10:32", "10:44", "10:56", "11:08", "11:20", "11:32", "11:44", "11:56", "12:08",
                            "12:20", "12:32", "12:44", "12:56", "13:08", "13:20", "13:32", "13:44", "13:56", "14:08",
                            "14:20", "14:32", "14:44", "14:56", "15:08", "15:20", "15:32", "15:44", "15:56", "16:08",
                            "16:20", "16:32", "16:44", "16:56", "17:08", "17:20", "17:32", "17:44", "17:56", "18:08",
                            "18:20", "18:32", "18:44", "18:56", "19:08", "19:20", "19:32", "19:44", "19:56", "20:08",
                            "20:20", "20:35"
                        ],
                        "toElGoli": [
                            "06:25", "06:37", "06:49", "07:01", "07:13", "07:25", "07:37", "07:49", "08:01", "08:13",
                            "08:25", "08:37", "08:49", "09:01", "09:13", "09:25", "09:37", "09:49", "10:01", "10:13",
                            "10:25", "10:37", "10:49", "11:01", "11:13", "11:25", "11:37", "11:49", "12:01", "12:13",
                            "12:25", "12:37", "12:49", "13:01", "13:13", "13:25", "13:37", "13:49", "14:01", "14:13",
                            "14:25", "14:37", "14:49", "15:01", "15:13", "15:25", "15:37", "15:49", "16:01", "16:13",
                            "16:25", "16:37", "16:49", "17:01", "17:13", "17:25", "17:37", "17:49", "18:01", "18:13",
                            "18:25", "18:37", "18:49", "19:01", "19:13", "19:25", "19:40", "19:55", "20:10", "20:25"
                        ]
                    },
                    "holidays": {
                        "toNoor": [
                            "07:55", "08:11", "08:27", "08:43", "08:59", "09:15", "09:31", "09:47", "10:03", "10:19",
                            "10:35", "10:51", "11:07", "11:23", "11:39", "11:55", "12:11", "12:27", "12:43", "12:59",
                            "13:15", "13:31", "13:47", "14:03", "14:19", "14:35", "14:51", "15:07", "15:23", "15:39",
                            "15:55", "16:11", "16:27", "16:43", "16:59", "17:15", "17:31", "17:47", "18:03", "18:19",
                            "18:35", "18:51", "19:07", "19:23", "19:39", "19:55", "20:11"
                        ],
                        "toElGoli": [
                            "07:50", "08:06", "08:22", "08:38", "08:54", "09:10", "09:26", "09:42", "09:58", "10:14",
                            "10:30", "10:46", "11:02", "11:18", "11:34", "11:50", "12:06", "12:22", "12:38", "12:54",
                            "13:10", "13:26", "13:42", "13:58", "14:14", "14:30", "14:46", "15:02", "15:18", "15:34",
                            "15:50", "16:06", "16:22", "16:38", "16:54", "17:10", "17:26", "17:42", "17:58", "18:14",
                            "18:30", "18:46", "19:02", "19:18", "19:35", "19:50"
                        ]
                    }
                },
                "گازران": {
                    "weekdays": {
                        "toNoor": [
                            "06:22", "06:34", "06:46", "06:58", "07:10", "07:22", "07:34", "07:46", "07:58", "08:10",
                            "08:22", "08:34", "08:46", "08:58", "09:10", "09:22", "09:34", "09:46", "09:58", "10:10",
                            "10:22", "10:34", "10:46", "10:58", "11:10", "11:22", "11:34", "11:46", "11:58", "12:10",
                            "12:22", "12:34", "12:46", "12:58", "13:10", "13:22", "13:34", "13:46", "13:58", "14:10",
                            "14:22", "14:34", "14:46", "14:58", "15:10", "15:22", "15:34", "15:46", "15:58", "16:10",
                            "16:22", "16:34", "16:46", "16:58", "17:10", "17:22", "17:34", "17:46", "17:58", "18:10",
                            "18:22", "18:34", "18:46", "18:58", "19:10", "19:22", "19:34", "19:46", "19:58", "20:10",
                            "20:22", "20:37"
                        ],
                        "toElGoli": [
                            "06:23", "06:35", "06:47", "06:59", "07:11", "07:23", "07:35", "07:47", "07:59", "08:11",
                            "08:23", "08:35", "08:47", "08:59", "09:11", "09:23", "09:35", "09:47", "09:59", "10:11",
                            "10:23", "10:35", "10:47", "10:59", "11:11", "11:23", "11:35", "11:47", "11:59", "12:11",
                            "12:23", "12:35", "12:47", "12:59", "13:11", "13:23", "13:35", "13:47", "13:59", "14:11",
                            "14:23", "14:35", "14:47", "14:59", "15:11", "15:23", "15:35", "15:47", "15:59", "16:11",
                            "16:23", "16:35", "16:47", "16:59", "17:11", "17:23", "17:35", "17:47", "17:59", "18:11",
                            "18:23", "18:35", "18:47", "18:59", "19:11", "19:23", "19:38", "19:53", "20:08", "20:23"
                        ]
                    },
                    "holidays": {
                        "toNoor": [
                            "07:57", "08:13", "08:29", "08:45", "09:01", "09:17", "09:33", "09:49", "10:05", "10:21",
                            "10:37", "10:53", "11:09", "11:25", "11:41", "11:57", "12:13", "12:29", "12:45", "13:01",
                            "13:17", "13:33", "13:49", "14:05", "14:21", "14:37", "14:53", "15:09", "15:25", "15:41",
                            "15:57", "16:13", "16:29", "16:45", "17:01", "17:17", "17:33", "17:49", "18:05", "18:21",
                            "18:37", "18:53", "19:09", "19:25", "19:41", "19:57", "20:13"
                        ],
                        "toElGoli": [
                            "07:48", "08:04", "08:20", "08:36", "08:52", "09:08", "09:24", "09:40", "09:56", "10:12",
                            "10:28", "10:44", "11:00", "11:16", "11:32", "11:48", "12:04", "12:20", "12:36", "12:52",
                            "13:08", "13:24", "13:40", "13:56", "14:12", "14:28", "14:44", "15:00", "15:16", "15:32",
                            "15:48", "16:04", "16:20", "16:36", "16:52", "17:08", "17:24", "17:40", "17:56", "18:12",
                            "18:28", "18:44", "19:00", "19:16", "19:33", "19:48"
                        ]
                    }
                },
                "لاله": {
                    "weekdays": {
                        "toNoor": [
                            "06:24", "06:36", "06:48", "07:00", "07:12", "07:24", "07:36", "07:48", "08:00", "08:12",
                            "08:24", "08:36", "08:48", "09:00", "09:12", "09:24", "09:36", "09:48", "10:00", "10:12",
                            "10:24", "10:36", "10:48", "11:00", "11:12", "11:24", "11:36", "11:48", "12:00", "12:12",
                            "12:24", "12:36", "12:48", "13:00", "13:12", "13:24", "13:36", "13:48", "14:00", "14:12",
                            "14:24", "14:36", "14:48", "15:00", "15:12", "15:24", "15:36", "15:48", "16:00", "16:12",
                            "16:24", "16:36", "16:48", "17:00", "17:12", "17:24", "17:36", "17:48", "18:00", "18:12",
                            "18:24", "18:36", "18:48", "19:00", "19:12", "19:24", "19:36", "19:48", "20:00", "20:12",
                            "20:24", "20:39"
                        ],
                        "toElGoli": [
                            "06:21", "06:33", "06:45", "06:57", "07:09", "07:21", "07:33", "07:45", "07:57", "08:09",
                            "08:21", "08:33", "08:45", "08:57", "09:09", "09:21", "09:33", "09:45", "09:57", "10:09",
                            "10:21", "10:33", "10:45", "10:57", "11:09", "11:21", "11:33", "11:45", "11:57", "12:09",
                            "12:21", "12:33", "12:45", "12:57", "13:09", "13:21", "13:33", "13:45", "13:57", "14:09",
                            "14:21", "14:33", "14:45", "14:57", "15:09", "15:21", "15:33", "15:45", "15:57", "16:09",
                            "16:21", "16:33", "16:45", "16:57", "17:09", "17:21", "17:33", "17:45", "17:57", "18:09",
                            "18:21", "18:33", "18:45", "18:57", "19:09", "19:21", "19:36", "19:51", "20:06", "20:21"
                        ]
                    },
                    "holidays": {
                        "toNoor": [
                            "07:59", "08:15", "08:31", "08:47", "09:03", "09:19", "09:35", "09:51", "10:07", "10:23",
                            "10:39", "10:55", "11:11", "11:27", "11:43", "11:59", "12:15", "12:31", "12:47", "13:03",
                            "13:19", "13:35", "13:51", "14:07", "14:23", "14:39", "14:55", "15:11", "15:27", "15:43",
                            "15:59", "16:15", "16:31", "16:47", "17:03", "17:19", "17:35", "17:51", "18:07", "18:23",
                            "18:39", "18:55", "19:11", "19:27", "19:43", "19:59", "20:15"
                        ],
                        "toElGoli": [
                            "07:46", "08:02", "08:18", "08:34", "08:50", "09:06", "09:22", "09:38", "09:54", "10:10",
                            "10:26", "10:42", "10:58", "11:14", "11:30", "11:46", "12:02", "12:18", "12:34", "12:50",
                            "13:06", "13:22", "13:38", "13:54", "14:10", "14:26", "14:42", "14:58", "15:14", "15:30",
                            "15:46", "16:02", "16:18", "16:34", "16:50", "17:06", "17:22", "17:38", "17:54", "18:10",
                            "18:26", "18:42", "18:58", "19:14", "19:31", "19:46"
                        ]
                    }
                },
                "امام حسین(ع)": {
                    "weekdays": {
                        "toNoor": [
                            "06:26", "06:38", "06:50", "07:02", "07:14", "07:26", "07:38", "07:50", "08:02", "08:14",
                            "08:26", "08:38", "08:50", "09:02", "09:14", "09:26", "09:38", "09:50", "10:02", "10:14",
                            "10:26", "10:38", "10:50", "11:02", "11:14", "11:26", "11:38", "11:50", "12:02", "12:14",
                            "12:26", "12:38", "12:50", "13:02", "13:14", "13:26", "13:38", "13:50", "14:02", "14:14",
                            "14:26", "14:38", "14:50", "15:02", "15:14", "15:26", "15:38", "15:50", "16:02", "16:14",
                            "16:26", "16:38", "16:50", "17:02", "17:14", "17:26", "17:38", "17:50", "18:02", "18:14",
                            "18:26", "18:38", "18:50", "19:02", "19:14", "19:26", "19:38", "19:50", "20:02", "20:14",
                            "20:26", "20:41"
                        ],
                        "toElGoli": [
                            "06:19", "06:31", "06:43", "06:55", "07:07", "07:19", "07:31", "07:43", "07:55", "08:07",
                            "08:19", "08:31", "08:43", "08:55", "09:07", "09:19", "09:31", "09:43", "09:55", "10:07",
                            "10:19", "10:31", "10:43", "10:55", "11:07", "11:19", "11:31", "11:43", "11:55", "12:07",
                            "12:19", "12:31", "12:43", "12:55", "13:07", "13:19", "13:31", "13:43", "13:55", "14:07",
                            "14:19", "14:31", "14:43", "14:55", "15:07", "15:19", "15:31", "15:43", "15:55", "16:07",
                            "16:19", "16:31", "16:43", "16:55", "17:07", "17:19", "17:31", "17:43", "17:55", "18:07",
                            "18:19", "18:31", "18:43", "18:55", "19:07", "19:19", "19:34", "19:49", "20:04", "20:19"
                        ]
                    },
                    "holidays": {
                        "toNoor": [
                            "08:01", "08:17", "08:33", "08:49", "09:05", "09:21", "09:37", "09:53", "10:09", "10:25",
                            "10:41", "10:57", "11:13", "11:29", "11:45", "12:01", "12:17", "12:33", "12:49", "13:05",
                            "13:21", "13:37", "13:53", "14:09", "14:25", "14:41", "14:57", "15:13", "15:29", "15:45",
                            "15:01", "16:17", "16:33", "16:49", "17:05", "17:21", "17:37", "17:53", "18:09", "18:25",
                            "18:41", "18:57", "19:13", "19:29", "19:45", "20:01", "20:17"
                        ],
                        "toElGoli": [
                            "07:44", "08:00", "08:16", "08:32", "08:48", "09:04", "09:20", "09:36", "09:52", "10:08",
                            "10:24", "10:40", "10:56", "11:12", "11:28", "11:44", "12:00", "12:16", "12:32", "12:48",
                            "13:04", "13:20", "13:36", "13:52", "14:08", "14:24", "14:40", "14:56", "15:12", "15:28",
                            "15:44", "16:00", "16:16", "16:32", "16:48", "17:04", "17:20", "17:36", "17:52", "18:08",
                            "18:24", "18:40", "18:56", "19:12", "19:29", "19:44"
                        ]
                    }
                },
                "شهید باکری": {
                    "weekdays": {
                        "toNoor": [
                            "06:28", "06:40", "06:52", "07:04", "07:16", "07:28", "07:40", "07:52", "08:04", "08:16",
                            "08:28", "08:40", "08:52", "09:04", "09:16", "09:28", "09:40", "09:52", "10:04", "10:16",
                            "10:28", "10:40", "10:52", "11:04", "11:16", "11:28", "11:40", "11:52", "12:04", "12:16",
                            "12:28", "12:40", "12:52", "13:04", "13:16", "13:28", "13:40", "13:52", "14:04", "14:16",
                            "14:28", "14:40", "14:52", "15:04", "15:16", "15:28", "15:40", "15:52", "16:04", "16:16",
                            "16:28", "16:40", "16:52", "17:04", "17:16", "17:28", "17:40", "17:52", "18:04", "18:16",
                            "18:28", "18:40", "18:52", "19:04", "19:16", "19:28", "19:40", "19:52", "20:04", "20:16",
                            "20:28", "20:43"
                        ],
                        "toElGoli": [
                            "06:17", "06:29", "06:41", "06:53", "07:05", "07:17", "07:29", "07:41", "07:53", "08:05",
                            "08:17", "08:29", "08:41", "08:53", "09:05", "09:17", "09:29", "09:41", "09:53", "10:05",
                            "10:17", "10:29", "10:41", "10:53", "11:05", "11:17", "11:29", "11:41", "11:53", "12:05",
                            "12:17", "12:29", "12:41", "12:53", "13:05", "13:17", "13:29", "13:41", "13:53", "14:05",
                            "14:17", "14:29", "14:41", "14:53", "15:05", "15:17", "15:29", "15:41", "15:53", "16:05",
                            "16:17", "16:29", "16:41", "16:53", "17:05", "17:17", "17:29", "17:41", "17:53", "18:05",
                            "18:17", "18:29", "18:41", "18:53", "19:05", "19:17", "19:32", "19:47", "20:02", "20:17"
                        ]
                    },
                    "holidays": {
                        "toNoor": [
                            "08:03", "08:19", "08:35", "08:51", "09:07", "09:23", "09:39", "09:55", "10:11", "10:27",
                            "10:43", "10:59", "11:15", "11:31", "11:47", "12:03", "12:19", "12:35", "12:51", "13:07",
                            "13:23", "13:39", "13:55", "14:11", "14:27", "14:43", "14:59", "15:15", "15:31", "15:47",
                            "16:03", "16:19", "16:35", "16:51", "17:07", "17:23", "17:39", "17:55", "18:11", "18:27",
                            "18:43", "18:59", "19:15", "19:31", "19:47", "20:03", "20:19"
                        ],
                        "toElGoli": [
                            "07:42", "07:58", "08:14", "08:30", "08:46", "09:02", "09:18", "09:34", "09:50", "10:06",
                            "10:22", "10:38", "10:54", "11:10", "11:26", "11:42", "11:58", "12:14", "12:30", "12:46",
                            "13:02", "13:18", "13:34", "13:50", "14:06", "14:22", "14:38", "14:54", "15:10", "15:26",
                            "15:42", "15:58", "16:14", "16:30", "16:46", "17:02", "17:18", "17:34", "17:50", "18:06",
                            "18:22", "18:38", "18:54", "19:10", "19:27", "19:42"
                        ]
                    }
                },
                "نور": {
                    "weekdays": {
                        "toNoor": [
                            "06:30", "06:42", "06:54", "07:06", "07:18", "07:30", "07:42", "07:54", "08:06", "08:18",
                            "08:30", "08:42", "08:54", "09:06", "09:18", "09:30", "09:42", "09:54", "10:06", "10:18",
                            "10:30", "10:42", "10:54", "11:06", "11:18", "11:30", "11:42", "11:54", "12:06", "12:18",
                            "12:30", "12:42", "12:54", "13:06", "13:18", "13:30", "13:42", "13:54", "14:06", "14:18",
                            "14:30", "14:42", "14:54", "15:06", "15:18", "15:30", "15:42", "15:54", "16:06", "16:18",
                            "16:30", "16:42", "16:54", "17:06", "17:18", "17:30", "17:42", "17:54", "18:06", "18:18",
                            "18:30", "18:42", "18:54", "19:06", "19:18", "19:30", "19:42", "19:54", "20:06", "20:18",
                            "20:30", "20:45"
                        ],
                        "toElGoli": [
                            "06:15", "06:27", "06:39", "06:51", "07:03", "07:15", "07:27", "07:39", "07:51", "08:03",
                            "08:15", "08:27", "08:39", "08:51", "09:03", "09:15", "09:27", "09:39", "09:51", "10:03",
                            "10:15", "10:27", "10:39", "10:51", "11:03", "11:15", "11:27", "11:39", "11:51", "12:03",
                            "12:15", "12:27", "12:39", "12:51", "13:03", "13:15", "13:27", "13:39", "13:51", "14:03",
                            "14:15", "14:27", "14:39", "14:51", "15:03", "15:15", "15:27", "15:39", "15:51", "16:03",
                            "16:15", "16:27", "16:39", "16:51", "17:03", "17:15", "17:27", "17:39", "17:51", "18:03",
                            "18:15", "18:27", "18:39", "18:51", "19:03", "19:15", "19:30", "19:45", "20:00", "20:15"
                        ]
                    },
                    "holidays": {
                        "toNoor": [
                            "08:05", "08:21", "08:37", "08:53", "09:09", "09:25", "09:41", "09:57", "10:13", "10:29",
                            "10:45", "11:01", "11:17", "11:33", "11:49", "12:05", "12:21", "12:37", "12:53", "13:09",
                            "13:25", "13:41", "13:57", "14:13", "14:29", "14:45", "15:01", "15:17", "15:33", "15:49",
                            "16:05", "16:21", "16:37", "16:53", "17:09", "17:25", "17:41", "17:57", "18:13", "18:29",
                            "18:45", "19:01", "19:17", "19:33", "19:49", "20:05", "20:21"
                        ],
                        "toElGoli": [
                            "07:40", "07:56", "08:12", "08:28", "08:44", "09:00", "09:16", "09:32", "09:48", "10:04",
                            "10:20", "10:36", "10:52", "11:08", "11:24", "11:40", "11:56", "12:12", "12:28", "12:44",
                            "13:00", "13:16", "13:32", "13:48", "14:04", "14:20", "14:36", "14:52", "15:08", "15:24",
                            "15:40", "15:56", "16:12", "16:28", "16:44", "17:00", "17:16", "17:32", "17:48", "18:04",
                            "18:20", "18:36", "18:52", "19:08", "19:25", "19:40"
                        ]
                    }
                }
            },

            // ساختار داده‌ی اصلی برنامه
            metroData: {},

            init() {
                // داده‌های برنامه را بر اساس آبجکت بالا می‌سازد
                this.metroData = {
                    "خط ۱ (ائل گؤلی - نور)": {
                        stations: Object.keys(this.scheduleData), // لیست ایستگاه‌ها از کلیدهای آبجکت
                        schedules: this.scheduleData // خود آبجکت به عنوان داده‌های زمان‌بندی
                    }
                };
            }
        };


        // ======================================================================
        // ||                        ماژول مدیریت تم (Dark/Light)                 ||
        // ======================================================================
        const themeManager = {
            toggleButton: null,
            iconDark: null,
            iconLight: null,

            init() {
                this.toggleButton = document.getElementById('theme-toggle');
                this.iconDark = document.getElementById('theme-icon-dark');
                this.iconLight = document.getElementById('theme-icon-light');

                this.toggleButton.addEventListener('click', () => this.toggleTheme());

                // بررسی تم ذخیره شده یا تم سیستم
                if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                    this.setTheme('dark');
                } else {
                    this.setTheme('light');
                }
            },

            toggleTheme() {
                const currentTheme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                this.setTheme(newTheme);
            },

            setTheme(theme) {
                if (theme === 'dark') {
                    document.documentElement.classList.add('dark');
                    localStorage.theme = 'dark';
                    this.iconDark.classList.remove('hidden');
                    this.iconLight.classList.add('hidden');
                } else {
                    document.documentElement.classList.remove('dark');
                    localStorage.theme = 'light';
                    this.iconDark.classList.add('hidden');
                    this.iconLight.classList.remove('hidden');
                }
            }
        };


        // ======================================================================
        // ||                        ماژول ویجت آب و هوا                       ||
        // ======================================================================
        const weatherWidget = {
            // مختصات تبریز
            lat: 38.08,
            lon: 46.29,
            apiUrl: '',

            // عناصر DOM
            iconContainer: null,
            tempEl: null,
            descEl: null,
            humidityEl: null,
            windEl: null,

            // آیکون‌های SVG
            icons: {
                'sun': `<svg class="w-16 h-16 text-yellow-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" /></svg>`,
                'cloud-sun': `<svg class="w-16 h-16 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 16.5V9.75m0 0l3 3m-3-3l-3 3M6.75 19.5a4.5 4.5 0 01-1.41-8.775 5.25 5.25 0 0110.233-2.33 3 3 0 013.758 3.848A3.752 3.752 0 0118 19.5H6.75z" /></svg>`, // Placeholder, needs better icon
                'cloud': `<svg class="w-16 h-16 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15a4.5 4.5 0 004.5 4.5H18a3.75 3.75 0 001.332-7.257 3 3 0 00-3.758-3.848 5.25 5.25 0 00-10.233 2.33A4.502 4.502 0 002.25 15z" /></svg>`,
                'fog': `<svg class="w-16 h-16 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12" /></svg>`,
                'rain': `<svg class="w-16 h-16 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6.75l-1.5 1.5-1.5-1.5m1.5-1.5v4.5m1.5 4.5l-1.5 1.5-1.5-1.5m1.5-1.5v4.5m6.75-3l-1.5 1.5-1.5-1.5m1.5-1.5v4.5m1.5 4.5l-1.5 1.5-1.5-1.5m1.5-1.5v4.5M6 16.5c-3.213 0-5.83-2.49-5.83-5.58 0-3.09 2.617-5.58 5.83-5.58 1.68 0 3.18.703 4.22 1.834 1.04-.19 2.11-.304 3.2-.304 4.31 0 7.82 3.13 7.82 7 0 3.87-3.51 7-7.82 7-1.09 0-2.16-.114-3.2-.304C9.18 15.797 7.68 16.5 6 16.5z" /></svg>`, // Placeholder
                'snow': `<svg class="w-16 h-16 text-blue-300" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 21l-1.5-1.5L7.5 21l-1.5-1.5L4.5 21l-1.5-1.5L1.5 21m19.5 0l-1.5-1.5L18 21l-1.5-1.5L15 21l-1.5-1.5L12 21M7.5 3.75l-1.5 1.5L4.5 3.75l-1.5 1.5L1.5 3.75m19.5 0l-1.5 1.5L18 3.75l-1.5 1.5L15 3.75l-1.5 1.5L12 3.75M7.5 12.75l-1.5 1.5L4.5 12.75l-1.5 1.5L1.5 12.75m19.5 0l-1.5 1.5L18 12.75l-1.5 1.5L15 12.75l-1.5 1.5L12 12.75" /></svg>`,
                'thunder': `<svg class="w-16 h-16 text-yellow-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z" /></svg>`
            },

            init() {
                this.apiUrl = `https://api.open-meteo.com/v1/forecast?latitude=${this.lat}&longitude=${this.lon}&current=temperature_2m,weather_code,relative_humidity_2m,wind_speed_10m&timezone=Asia/Tehran`;

                this.iconContainer = document.getElementById('weather-icon-container');
                this.tempEl = document.getElementById('weather-temp');
                this.descEl = document.getElementById('weather-desc');
                this.humidityEl = document.getElementById('weather-humidity');
                this.windEl = document.getElementById('weather-wind');

                this.fetchWeather();
            },

            async fetchWeather() {
                try {
                    const response = await fetch(this.apiUrl);
                    if (!response.ok) throw new Error('Network response was not ok');
                    const data = await response.json();

                    const current = data.current;
                    const temp = Math.round(current.temperature_2m);
                    const code = current.weather_code;
                    const humidity = current.relative_humidity_2m;
                    const wind = Math.round(current.wind_speed_10m);

                    // به‌روزرسانی DOM
                    this.tempEl.textContent = `${temp}°`;
                    this.descEl.textContent = this.translateWeatherCode(code);
                    this.humidityEl.textContent = `رطوبت: ${humidity}٪`;
                    this.windEl.textContent = `باد: ${wind} ک/س`;
                    this.iconContainer.innerHTML = this.getWeatherIcon(code);

                } catch (error) {
                    console.error("خطا در دریافت آب و هوا:", error);
                    this.descEl.textContent = "خطا در دریافت";
                    this.tempEl.textContent = "؟°";
                    this.iconContainer.innerHTML = this.icons['cloud']; // آیکون پیش‌فرض در صورت خطا
                }
            },

            translateWeatherCode(code) {
                const codes = {
                    0: "آفتابی",
                    1: "عمدتاً آفتابی",
                    2: "کمی ابری",
                    3: "ابری",
                    45: "مه",
                    48: "مه غلیظ",
                    51: "نم نم باران",
                    53: "باران",
                    55: "باران شدید",
                    61: "باران خفیف",
                    63: "باران",
                    65: "باران شدید",
                    71: "برف خفیف",
                    73: "برف",
                    75: "برف شدید",
                    80: "رگبار باران",
                    81: "رگبار باران",
                    82: "رگبار شدید",
                    95: "رعد و برق",
                    96: "رعد و برق و تگرگ",
                    99: "رعد و برق و تگرگ"
                };
                return codes[code] || "نامشخص";
            },

            getWeatherIcon(code) {
                if ([0, 1].includes(code)) return this.icons['sun'];
                if ([2, 3].includes(code)) return this.icons['cloud-sun'];
                if ([45, 48].includes(code)) return this.icons['fog'];
                if (code >= 51 && code <= 65) return this.icons['rain'];
                if (code >= 80 && code <= 82) return this.icons['rain'];
                if (code >= 71 && code <= 75) return this.icons['snow'];
                if (code >= 95) return this.icons['thunder'];
                return this.icons['cloud'];
            }
        };


        // ======================================================================
        // ||                          ماژول تقویم فارسی                          ||
        // ======================================================================
        const persianCalendar = {
            calendarGrid: null,
            monthYearHeader: null,
            // مپ کردن روزهای هفته انگلیسی به ایندکس فارسی (0=شنبه)
            dayMap: { 'Sat': 0, 'Sun': 1, 'Mon': 2, 'Tue': 3, 'Wed': 4, 'Thu': 5, 'Fri': 6 },

            init() {
                this.calendarGrid = document.getElementById('calendar-grid');
                this.monthYearHeader = document.getElementById('calendar-month-year');
                this.render();
            },

            // الگوریتم دقیق محاسبه سال کبیسه شمسی
            isJalaliLeap(jy) {
                // این یک الگوریتم معتبر برای تشخیص سال کبیسه شمسی است
                return (((((jy - 474) % 2820) + 474) + 38) * 682) % 2816 < 682;
            },

            // دریافت اطلاعات تاریخ شمسی
            getJalaliDateInfo() {
                const now = new Date();

                // فرمت‌کننده برای نمایش در UI (اعداد فارسی)
                const uiFormatter = (options) => new Intl.DateTimeFormat('fa-IR-u-nu-arab', options).format(now);

                // فرمت‌کننده برای محاسبات داخلی (اعداد لاتین)
                // از 'en-US' استفاده می‌کنیم تا 'parseInt' همیشه اعداد لاتین دریافت کند
                // 'u-ca-persian' تقویم را به شمسی تغییر می‌دهد
                const logicFormatter = (options) => new Intl.DateTimeFormat('en-US-u-ca-persian', options).format(now);

                const today = parseInt(logicFormatter({ day: 'numeric' }));
                const monthName = uiFormatter({ month: 'long' });
                const yearUI = uiFormatter({ year: 'numeric' });

                const monthIndex = parseInt(logicFormatter({ month: 'numeric' })) - 1; // 0-11
                const yearLogic = parseInt(logicFormatter({ year: 'numeric' }));

                // --- محاسبه اولین روز ماه ---
                // 1. برو به روز اول ماه میلادی جاری
                const gregorianDate = new Date();
                gregorianDate.setDate(1);

                // 2. روز شمسی معادل آن را بگیر
                let jalaliDay = parseInt(new Intl.DateTimeFormat('en-US-u-ca-persian', { day: 'numeric' }).format(gregorianDate));

                // 3. اگر روز شمسی 1 نبود، به عقب برگرد تا به 1 برسی
                while (jalaliDay !== 1) {
                    gregorianDate.setDate(gregorianDate.getDate() - 1); // یک روز به عقب برو
                    jalaliDay = parseInt(new Intl.DateTimeFormat('en-US-u-ca-persian', { day: 'numeric' }).format(gregorianDate));
                }

                // 4. حالا gregorianDate اولین روز ماه شمسی جاری است. روز هفته آن را بگیر
                const firstDayShort = new Intl.DateTimeFormat('en-US-u-ca-persian', { weekday: 'short' }).format(gregorianDate);
                const firstDayWeekday = this.dayMap[firstDayShort]; // 0-6

                // محاسبه تعداد روزهای ماه شمسی
                const daysInMonth = (monthIndex < 6) ? 31 : (monthIndex < 11) ? 30 : (this.isJalaliLeap(yearLogic) ? 30 : 29);

                return { today, monthName, yearUI, firstDayWeekday, daysInMonth };
            },

            render() {
                try {
                    const { today, monthName, yearUI, firstDayWeekday, daysInMonth } = this.getJalaliDateInfo();

                    this.monthYearHeader.textContent = `${monthName} ${yearUI}`;

                    // پاک کردن روزهای قبلی (به جز هدر)
                    const dayElements = this.calendarGrid.querySelectorAll('.day, .empty');
                    dayElements.forEach(el => el.remove());

                    // اضافه کردن خانه‌های خالی برای شروع هفته
                    for (let i = 0; i < firstDayWeekday; i++) {
                        const emptyCell = document.createElement('div');
                        emptyCell.className = 'empty h-8';
                        this.calendarGrid.appendChild(emptyCell);
                    }

                    // اضافه کردن روزهای ماه
                    for (let day = 1; day <= daysInMonth; day++) {
                        const dayCell = document.createElement('div');
                        dayCell.className = 'day h-8 flex items-center justify-center text-sm p-1 rounded-full transition-colors cursor-default';

                        // نمایش اعداد به فارسی
                        dayCell.textContent = day.toLocaleString('fa-IR-u-nu-arab');

                        if (day === today) {
                            dayCell.classList.add('today'); // هایلایت روز جاری
                        } else {
                            dayCell.classList.add('hover:bg-gray-200', 'dark:hover:bg-gray-700');
                        }

                        // جمعه‌ها
                        if ((firstDayWeekday + day - 1) % 7 === 6) {
                            dayCell.classList.add('text-red-500', 'dark:text-red-400');
                        }

                        this.calendarGrid.appendChild(dayCell);
                    }
                } catch (e) {
                    console.error("خطا در رندر تقویم:", e);
                    // خطایی به کاربر نمایش داده نمی‌شود
                }
            }
        };


        // ======================================================================
        // ||                         ماژول اصلی برنامه مترو                      ||
        // ======================================================================
        const metroApp = {
            lineSelect: null,
            stationSelect: null,
            dayTypeSelect: null,
            scheduleResults: null,
            metroData: null,

            // مپ کردن کلیدهای JSON به متن فارسی
            directionLabels: {
                "toNoor": "به سمت نور",
                "toElGoli": "به سمت ائل گؤلی"
            },

            init(metroData) {
                this.metroData = metroData; // دریافت داده‌های پردازش شده

                // پیدا کردن عناصر DOM
                this.lineSelect = document.getElementById('line-select');
                this.stationSelect = document.getElementById('station-select');
                this.dayTypeSelect = document.getElementById('day-type-select');
                this.scheduleResults = document.getElementById('schedule-results');

                // بارگذاری خطوط
                this.loadLines();

                // افزودن Event Listener ها
                this.lineSelect.addEventListener('change', () => this.onLineChange());
                this.stationSelect.addEventListener('change', () => this.displaySchedule());
                this.dayTypeSelect.addEventListener('change', () => this.displaySchedule());
            },

            // بارگذاری لیست خطوط در <select>
            loadLines() {
                const lines = Object.keys(this.metroData);
                lines.forEach(line => {
                    const option = document.createElement('option');
                    option.value = line;
                    option.textContent = line;
                    this.lineSelect.appendChild(option);
                });
            },

            // هنگام تغییر خط
            onLineChange() {
                const selectedLine = this.lineSelect.value;

                // پاک کردن و غیرفعال کردن ایستگاه‌ها
                this.stationSelect.innerHTML = '<option value="">-- ایستگاه را انتخاب کنید --</option>';
                this.stationSelect.disabled = true;
                this.dayTypeSelect.disabled = true;
                this.scheduleResults.innerHTML = '<p class="text-center text-gray-500 dark:text-gray-400">لطفاً ایستگاه مورد نظر خود را انتخاب کنید.</p>';

                if (selectedLine) {
                    // بارگذاری ایستگاه‌های خط انتخاب شده
                    const stations = this.metroData[selectedLine].stations;
                    stations.forEach(station => {
                        const option = document.createElement('option');
                        option.value = station;
                        option.textContent = station;
                        this.stationSelect.appendChild(option);
                    });
                    this.stationSelect.disabled = false;
                }
            },

            // نمایش برنامه حرکت
            displaySchedule() {
                const line = this.lineSelect.value;
                const station = this.stationSelect.value;
                const dayType = this.dayTypeSelect.value;

                if (station) {
                    this.dayTypeSelect.disabled = false;
                } else {
                    // اگر ایستگاه انتخاب نشده باشد، چیزی نشان نده
                    this.scheduleResults.innerHTML = '<p class="text-center text-gray-500 dark:text-gray-400">لطفاً ایستگاه مورد نظر خود را انتخاب کنید.</p>';
                    return;
                }

                if (!line || !station || !dayType) {
                    return; // هنوز همه چیز انتخاب نشده است
                }

                // دریافت داده‌های زمان‌بندی بر اساس ساختار جدید
                const stationSchedules = this.metroData[line]?.schedules[station];
                const daySchedule = stationSchedules?.[dayType];

                if (!daySchedule) {
                    this.scheduleResults.innerHTML = `<p class="text-center text-red-500 dark:text-red-400">متاسفانه، برنامه حرکتی برای ایستگاه "${station}" در این روز یافت نشد.</p>`;
                    return;
                }

                // رندر کردن نتایج
                let html = '<div class="grid grid-cols-1 md:grid-cols-2 gap-4">';

                // حلقه‌زدن بر اساس کلیدهای جهت‌یابی (toNoor, toElGoli)
                for (const directionKey in this.directionLabels) {

                    const directionName = this.directionLabels[directionKey]; // "به سمت نور"
                    const times = daySchedule[directionKey]; // آرایه زمان‌ها

                    html += `
                        <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4">
                            <h3 class="text-lg font-semibold text-blue-600 dark:text-blue-400 mb-3">${directionName}</h3>
                            <div class="flex flex-wrap gap-2 justify-center">
                    `;

                    if (!times || times.length === 0) {
                        // مدیریت ایستگاه‌های پایانی
                        let placeholder = 'زمانی ثبت نشده';
                        if (station === "ائل گؤلی" && directionKey === "toElGoli") placeholder = "(ایستگاه پایانی)";
                        if (station === "نور" && directionKey === "toNoor") placeholder = "(ایستگاه پایانی)";

                        html += `<span class="text-gray-500 dark:text-gray-400 p-2">${placeholder}</span>`;

                    } else {
                        times.forEach(time => {
                            html += `<span class="bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-md px-3 py-1 text-sm font-medium tabular-nums">${time}</span>`;
                        });
                    }

                    html += `
                            </div>
                        </div>
                    `;
                }

                html += '</div>';
                this.scheduleResults.innerHTML = html;
            }
        };

        // ======================================================================
        // ||                      راه‌اندازی برنامه (Init)                       ||
        // ======================================================================
        document.addEventListener('DOMContentLoaded', () => {
            // آماده‌سازی داده‌های مترو
            metroDataManager.init();

            // راه‌اندازی ماژول‌ها
            themeManager.init();
            weatherWidget.init();
            persianCalendar.init();
            metroApp.init(metroDataManager.metroData); // داده‌های مترو را به ماژول برنامه پاس می‌دهد
        });

    </script>
</body>

</html>